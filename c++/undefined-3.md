# 구조체 / 유니온

#### 구조체

* 컴퓨터 입장에서는 구조체로 묶인 타입의 개념이 아닌, 각각의 변수를 지역 변수로 취급하여 접근
* 포인터로 접근 시
  * 구조체의 주소값 push
  * 구조체의  주소값에서 해당 변수까지 연산하여 접근
  * '가장 많이 접근할 대상을 첫 번째로 놓아야 연산이 수월하다 → 해당 변수로 이동하는 연산X
* 구조체 패딩 규칙
  1. 멤버 변수 중 가장 크기가 큰 타입을 기준으로 전체 구조체의 크기가 결정
  2. 구조체 변수의 시작점을 0으로 두고, 각 멤버 변수의 주소는 자신의 크기에 맞게 떨어져야 한다.
     * 해당 조건은 클래스의 멤버 변수, 함수의 지역 변수에도 똑같이 적용

> 패딩을 하는 이유?
>
> * 캐시 메모리의 경우 캐시 라인이라는 64byte의 메모리 블럭을 구성하고, 해당 블럭을 통채로 가져옴
> * 패딩을 하지 않을 경우, 변수가 2개의 블럭에 걸쳐서 할당되었을 때
>   * 블럭 2개를 읽어들어야하기 때문에 성능 ↓
>   * 멀티 스레드의 경우 값이 바뀌게 될 수 있음
>
> 해당 문제들을 방지하기 위해 컴파일러 단계에서 규격을 맞춰준다

* \#pragma pack ~ \#pragma pop
  * \#pragma pack 패딩 크기 : 패딩의 크기를 지정
  * \#pragma pop : 패딩 크기를 원래대로 되돌림
  * 주로 네트워크 프로그래밍에서 사용

    * 네트워크 프로그래밍에서 네트워크 트래픽과 직접적으로 연관

#### 유니온

* 선언된 변수를 기준으로 가장 크기가 큰  변수의 메모리 할당, 공유

#### 



#### 

